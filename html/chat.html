<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryptoLLM èŠå¤©ç•Œé¢</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .chat-container {
            width: 100%;
            max-width: 800px;
            height: 600px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .chat-header {
            background: linear-gradient(135deg, #2196F3, #21CBF3);
            color: white;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .bot-avatar {
            width: 40px;
            height: 40px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .header-info h3 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .header-info .subtitle {
            font-size: 14px;
            opacity: 0.9;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f8f9fa;
        }

        .message {
            display: flex;
            margin-bottom: 20px;
            gap: 12px;
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .user-message {
            flex-direction: row-reverse;
        }

        .avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            flex-shrink: 0;
        }

        .bot-message .avatar {
            background: linear-gradient(135deg, #2196F3, #21CBF3);
            color: white;
        }

        .user-message .avatar {
            background: linear-gradient(135deg, #FF6B6B, #FF8E53);
            color: white;
        }

        .message-content {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 18px;
            line-height: 1.5;
            word-wrap: break-word;
        }

        .bot-message .message-content {
            background: white;
            border: 1px solid #e9ecef;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .user-message .message-content {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
        }

        .message-content ul {
            margin: 8px 0;
            padding-left: 20px;
        }

        .message-content li {
            margin: 4px 0;
        }

        .message-content strong {
            font-weight: 600;
        }

        .chat-input {
            padding: 20px;
            background: white;
            border-top: 1px solid #e9ecef;
            display: flex;
            gap: 12px;
        }

        .input-field {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            outline: none;
            font-size: 14px;
            background: #f8f9fa;
            color: #6c757d;
            cursor: not-allowed;
        }

        .send-button {
            padding: 12px 24px;
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: not-allowed;
            font-size: 14px;
            font-weight: 600;
            opacity: 0.6;
        }

        .typing-indicator {
            display: none;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
            padding: 12px 16px;
            background: white;
            border-radius: 18px;
            border: 1px solid #e9ecef;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: #999;
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .chat-container {
                height: 90vh;
            }
            
            .message-content {
                max-width: 85%;
            }
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <div class="bot-avatar">ğŸ¤–</div>
            <div class="header-info">
                <h3>CryptoLLM</h3>
                <div class="subtitle">ç®—æ³•åˆ†æåŠ©æ‰‹</div>
            </div>
        </div>

        <div class="chat-messages" id="chatMessages">
            <div class="typing-indicator" id="typingIndicator">
                <div class="avatar">ğŸ¤–</div>
                <div class="typing-dots">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            </div>
        </div>

        <div class="chat-input">
            <input type="text" class="input-field" placeholder="è¯¢é—®ä»»ä½•é—®é¢˜" disabled>
            <button class="send-button" disabled>å‘é€</button>
        </div>
    </div>

    <script>
        const chatMessages = document.getElementById('chatMessages');
        const typingIndicator = document.getElementById('typingIndicator');

        // å®Œæ•´çš„å¯¹è¯å†…å®¹ï¼ŒåŒ…æ‹¬åˆå§‹æ¶ˆæ¯
        const fullConversation = [
            { type: 'bot', content: 'ä½ å¥½ï¼æˆ‘æ˜¯CryptoLLMï¼Œä¸“ä¸šçš„å¯†ç å­¦åˆ†æåŠ©æ‰‹ã€‚', delay: 1000 },
            { type: 'user', content: 'è¯·åˆ†æAES-256åŠ å¯†ç®—æ³•çš„å®‰å…¨æ€§ç‰¹ç‚¹', delay: 1000 },
            { type: 'bot', content: '<strong>AES-256å®‰å…¨æ€§åˆ†æï¼š</strong><br>â€¢ <strong>256ä½å¯†é’¥é•¿åº¦</strong>ï¼Œæä¾›2^256ç§å¯èƒ½çš„å¯†é’¥ç»„åˆï¼Œç†è®ºä¸Šæ— æ³•æš´åŠ›ç ´è§£<br>â€¢ <strong>é‡‡ç”¨SPNç»“æ„</strong>ï¼Œ14è½®åŠ å¯†è½®æ¬¡ç¡®ä¿é«˜åº¦æ‰©æ•£å’Œæ··æ·†<br>â€¢ <strong>æŠ—é‡å­æ”»å‡»èƒ½åŠ›å¼º</strong>ï¼Œå³ä¾¿é¢å¯¹Groverç®—æ³•ä¹Ÿéœ€è¦2^128æ¬¡è¿ç®—<br>â€¢ <strong>è¢«NSAæ‰¹å‡†ç”¨äºæœºå¯†çº§ä¿¡æ¯ä¿æŠ¤</strong>ï¼Œç¬¦åˆFIPS 140-2æ ‡å‡†', delay: 1000 },
            { type: 'user', content: 'RSA-2048ä¸AES-256å¯¹æ¯”ï¼Œåœ¨å®‰å…¨æ€§å’Œæ€§èƒ½ä¸Šæœ‰ä»€ä¹ˆå·®å¼‚ï¼Ÿ', delay: 1000 },
            { type: 'bot', content: '<strong>RSA-2048 vs AES-256 å¯¹æ¯”åˆ†æï¼š</strong><br><strong>å®‰å…¨æ€§å¯¹æ¯”ï¼š</strong><br>â€¢ <strong>RSA-2048ï¼š</strong>ç­‰æ•ˆ80ä½å®‰å…¨å¼ºåº¦ï¼Œæ˜“å—é‡å­æ”»å‡»å¨èƒ<br>â€¢ <strong>AES-256ï¼š</strong>ç­‰æ•ˆ128ä½å®‰å…¨å¼ºåº¦ï¼ŒæŠ—é‡å­æ”»å‡»èƒ½åŠ›æ›´å¼º<br><strong>æ€§èƒ½å¯¹æ¯”ï¼š</strong><br>â€¢ <strong>RSAåŠ å¯†ï¼š</strong>æ…¢ï¼Œç”¨äºå¯†é’¥äº¤æ¢<br>â€¢ <strong>AESåŠ å¯†ï¼š</strong>å¿«ï¼Œé€‚åˆæ•°æ®åŠ å¯†', delay: 1000 },
            { type: 'user', content: 'ä»€ä¹ˆæ˜¯é‡å­å¯†ç å­¦ï¼Ÿ', delay: 1000 },
            { type: 'bot', content: 'é‡å­å¯†ç å­¦æ˜¯åˆ©ç”¨é‡å­åŠ›å­¦åŸç†æ¥ä¿æŠ¤ä¿¡æ¯å®‰å…¨çš„æŠ€æœ¯ï¼š<br>â€¢ åŸºäºé‡å­ä¸ç¡®å®šæ€§åŸç†<br>â€¢ é‡å­å¯†é’¥åˆ†å‘(QKD)æŠ€æœ¯<br>â€¢ ç†è®ºä¸Šä¸å¯ç ´è§£çš„å®‰å…¨æ€§<br>â€¢ å¯æ£€æµ‹çªƒå¬è¡Œä¸º', delay: 1000 },
            { type: 'user', content: 'æ¤­åœ†æ›²çº¿åŠ å¯†ç›¸æ¯”RSAæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ', delay: 1000 },
            { type: 'bot', content: 'æ¤­åœ†æ›²çº¿åŠ å¯†(ECC)çš„ä¸»è¦ä¼˜åŠ¿ï¼š<br>â€¢ æ›´çŸ­çš„å¯†é’¥é•¿åº¦æä¾›ç›¸åŒå®‰å…¨çº§åˆ«<br>â€¢ è®¡ç®—æ•ˆç‡æ›´é«˜ï¼Œé€‚åˆç§»åŠ¨è®¾å¤‡<br>â€¢ èŠ‚çœå­˜å‚¨ç©ºé—´å’Œå¸¦å®½<br>â€¢ æŠ—é‡å­æ”»å‡»èƒ½åŠ›ç›¸å¯¹è¾ƒå¼º', delay: 1000 },
            { type: 'user', content: 'å“ˆå¸Œå‡½æ•°åœ¨åŒºå—é“¾ä¸­çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ', delay: 1000 },
            { type: 'bot', content: 'å“ˆå¸Œå‡½æ•°åœ¨åŒºå—é“¾ä¸­èµ·åˆ°å…³é”®ä½œç”¨ï¼š<br>â€¢ ç”Ÿæˆå”¯ä¸€çš„åŒºå—æ ‡è¯†ç¬¦<br>â€¢ ç¡®ä¿æ•°æ®å®Œæ•´æ€§éªŒè¯<br>â€¢ æ„å»ºMerkleæ ‘ç»“æ„<br>â€¢ å·¥ä½œé‡è¯æ˜ç®—æ³•çš„åŸºç¡€<br>â€¢ é˜²æ­¢æ•°æ®ç¯¡æ”¹å’ŒåŒé‡æ”¯ä»˜', delay: 1000 }
        ];

        let conversationIndex = 0;

        function addMessage(content, isUser = false, shouldStream = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
            
            const avatar = document.createElement('div');
            avatar.className = 'avatar';
            avatar.textContent = isUser ? 'ğŸ‘¤' : 'ğŸ¤–';
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            
            if (isUser) {
                messageDiv.appendChild(contentDiv);
                messageDiv.appendChild(avatar);
            } else {
                messageDiv.appendChild(avatar);
                messageDiv.appendChild(contentDiv);
            }
            
            chatMessages.insertBefore(messageDiv, typingIndicator);
            
            if (shouldStream && !isUser) {
                // æµå¼æ˜¾ç¤ºæ–‡æœ¬
                streamText(contentDiv, content);
            } else {
                contentDiv.innerHTML = `<p>${content}</p>`;
            }
            
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function streamText(element, text) {
            element.innerHTML = '<p></p>';
            const paragraph = element.querySelector('p');
            let currentIndex = 0;
            
            function addNextChar() {
                if (currentIndex < text.length) {
                    const currentChar = text[currentIndex];
                    
                    // å¦‚æœé‡åˆ°HTMLæ ‡ç­¾ï¼Œæ•´ä¸ªæ ‡ç­¾ä¸€æ¬¡æ€§æ·»åŠ 
                    if (currentChar === '<') {
                        const tagEnd = text.indexOf('>', currentIndex);
                        if (tagEnd !== -1) {
                            const fullTag = text.substring(currentIndex, tagEnd + 1);
                            paragraph.innerHTML += fullTag;
                            currentIndex = tagEnd + 1;
                            setTimeout(addNextChar, 5); // HTMLæ ‡ç­¾åå¾ˆå¿«ç»§ç»­
                            return;
                        }
                    }
                    
                    paragraph.innerHTML += currentChar;
                    currentIndex++;
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                    
                    // æ ¹æ®å­—ç¬¦ç±»å‹è°ƒæ•´é€Ÿåº¦
                    let delay = 35; // é»˜è®¤35ms
                    if (['ã€‚', 'ï¼', 'ï¼Ÿ', '.', '!', '?'].includes(currentChar)) {
                        delay = 200; // å¥å·ååœé¡¿æ›´ä¹…
                    } else if (['ï¼Œ', 'ã€', ',', ';', ':', 'ï¼š'].includes(currentChar)) {
                        delay = 100; // é€—å·åç¨ä½œåœé¡¿
                    } else if (currentChar === ' ') {
                        delay = 25; // ç©ºæ ¼ç¨å¿«
                    } else if (['â€¢', 'Â·'].includes(currentChar)) {
                        delay = 120; // åˆ—è¡¨ç¬¦å·ååœé¡¿
                    }
                    
                    setTimeout(addNextChar, delay);
                } else {
                    // æ–‡æœ¬æ˜¾ç¤ºå®Œæˆï¼Œç»§ç»­ä¸‹ä¸€æ¡æ¶ˆæ¯
                    conversationIndex++;
                    setTimeout(() => startConversation(), 1000);
                }
            }
            
            addNextChar();
        }

        function showTyping() {
            typingIndicator.style.display = 'flex';
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function hideTyping() {
            typingIndicator.style.display = 'none';
        }

        function startConversation() {
            if (conversationIndex >= fullConversation.length) {
                // é‡ç½®å¯¹è¯
                conversationIndex = 0;
                setTimeout(() => {
                    // æ¸…é™¤æ‰€æœ‰æ¶ˆæ¯
                    const messages = chatMessages.querySelectorAll('.message');
                    messages.forEach(message => message.remove());
                    startConversation();
                }, 3000);
                return;
            }

            const currentMessage = fullConversation[conversationIndex];
            
            setTimeout(() => {
                if (currentMessage.type === 'bot') {
                    showTyping();
                    setTimeout(() => {
                        hideTyping();
                        addMessage(currentMessage.content, false, true); // å¼€å¯æµå¼æ˜¾ç¤º
                        // ä¸åœ¨è¿™é‡Œè°ƒç”¨ conversationIndex++ å’Œ startConversation()ï¼Œ
                        // å› ä¸ºè¿™äº›ä¼šåœ¨ streamText å®Œæˆåè°ƒç”¨
                    }, 300); // æ‰“å­—æŒ‡ç¤ºå™¨æ˜¾ç¤ºæ—¶é—´
                } else {
                    addMessage(currentMessage.content, true);
                    conversationIndex++;
                    startConversation();
                }
            }, currentMessage.delay);
        }

        // å¼€å§‹å¯¹è¯æ¼”ç¤º
        startConversation();
    </script>
</body>
</html>